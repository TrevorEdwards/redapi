iroh         = (require "./index")
trampoline   = (require "./trampoline")
difference   = (require './lib/utils').difference
assert_print = (require './lib/utils').assert_print

object = trampoline.object
array  = trampoline.array
nullable = trampoline.nullable


# Types
string  = (x) -> typeof x is 'string'
boolean = (x) -> typeof x is 'boolean'
date    = (x) -> x instanceof Date
log = (res) -> console.log "#{if res then 'good' else 'nope'}"


# event_model = (json) ->
#   jkeys = (Object.keys json)
#   return false if (difference jkeys, iroh.ALL_LOCATIONS).length
#   return jkeys.reduce (acc, hallkey) ->
#     acc and (array [ object
#       summary : (x) -> typeof x is 'string'
#       start   : (x) -> x instanceof Date
#       end     : (x) -> x instanceof Date
#     ])(json[hallkey])
#   , true

# iroh
#   .get_events iroh.ALL_LOCATIONS, iroh.DATE_RANGE('April 6, 2015', 'April 8, 2015')
#   .then event_model
#   .then console.log

menu_model = array [
  object
    menu : array [
      object
        name : string
        category : string
        healthy : boolean
    ]
    meal : string
    location : string
]

# iroh
#   .get_menus ['bear_necessities'], iroh.ALL_MEALS
#   .then menu_model
#   .then console.log

iroh
  .get_menus ['okenshields'], iroh.ALL_MEALS
  .then menu_model
  .then log
  .catch (twenty) ->
    console.trace twenty

# iroh
#   .get_menus iroh.ALL_MEALS, iroh.ALL_LOCATIONS, iroh.DIM_MEALS
#   .then menu_model
#   .then console.log # should be false?